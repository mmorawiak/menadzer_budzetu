<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strona główna</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-5">
        <h2>Witaj, {{ current_user.username }}!</h2>
        <h3>Podsumowanie finansowe</h3>
        <ul>
            <li>Dochody: {{ total_income }} zł</li>
            <li>Wydatki: {{ total_expense }} zł</li>
            <li>Saldo: {{ balance }} zł</li>
        </ul>

        <form method="POST" class="mb-3">
            {{ form.hidden_tag() }}
            {{ form.type(class="form-select mb-2") }}
            {{ form.submit(class="btn btn-primary") }}
        </form>

        <h3>Twoje transakcje:</h3>
        <ul>
            {% for transaction in transactions %}
                <li>
                    {{ transaction.date.strftime('%Y-%m-%d') }} - 
                    {{ transaction.title }} ({{ transaction.type }}: {{ transaction.amount }} zł)
                    <!-- Dodajemy przycisk edycji -->
                    <a href="{{ url_for('edit_transaction', transaction_id=transaction.id) }}" class="btn btn-sm btn-warning">Edytuj</a>
                </li>
            {% endfor %}
        </ul>

        <a href="/add" class="btn btn-primary mt-3">Dodaj transakcję</a>
        <a href="/export" class="btn btn-success mt-3">Eksportuj do CSV</a>
        <a href="/logout" class="btn btn-danger mt-3">Wyloguj</a>
    </div>
</body>
</html>
